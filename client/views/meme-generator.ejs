<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <meta name="description" content="<%= description %>">
    <meta name="keywords" content="$AQUA, AI meme generator, trained model, crypto memes, SUI network, cryptocurrency memes, meme creator, viral memes, blockchain memes, community memes, social media sharing, meme templates">
    <meta name="author" content="$AQUA Team">
    <link rel="canonical" href="<%= canonicalUrl %>">
    <link rel="icon" type="image/png" href="/aquacat.png">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:image" content="<%= ogImage %>">
    <meta property="og:url" content="<%= canonicalUrl %>">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="$AQUA">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= title %>">
    <meta name="twitter:description" content="<%= description %>">
    <meta name="twitter:image" content="<%= ogImage %>">
    <meta name="twitter:site" content="@AQUA_on_SUI">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/main.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="/css/meme-generator.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="/css/auth.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts for Enhanced Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton:wght@400&family=Bangers:wght@400&family=Bebas+Neue:wght@400&family=Bungee:wght@400&family=Creepster:wght@400&family=Fredoka+One:wght@400&family=Oswald:wght@300;400;500;600;700&family=Righteous:wght@400&family=Russo+One:wght@400&family=Staatliches:wght@400&display=swap" rel="stylesheet">
    
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="/" class="nav-logo">$AQUA</a>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/meme-generator" class="active">Meme Generator</a></li>
                    <li><a href="/gallery">Gallery</a></li>
                </ul>
                <div id="auth-container">
                    <!-- Authentication UI will be injected here by auth.js -->
                </div>
            </nav>
        </div>
    </header>

    <main class="meme-generator-container">
        <div class="container">
            <div class="generator-hero scroll-animate">
                <h1>ðŸŽ¨ $AQUA Meme Generator</h1>
                <p>Create viral memes with AI generation, professional editing tools, and instant sharing!</p>
            </div>

            <div class="generator-steps">
                <!-- Step 1: Choose Your Starting Point -->
                <div class="step-container active scroll-animate" id="step1">
                    <div class="step-header" onclick="toggleStep('step1')">
                        <div class="step-title">
                            <span class="step-number">1</span>
                            <h3>Generate Your Image</h3>
                        </div>
                        <i class="fas fa-chevron-up step-toggle"></i>
                    </div>
                    <div class="step-content">
                        <div class="primary-choice">
                            <div class="choice-card active" id="aiChoice">
                                <div class="choice-icon">
                                    <i class="fas fa-magic"></i>
                                </div>
                                <h4>Generate Your Image</h4>
                                <p>Create unique $AQUA themed images with AI assistance - the only way to create AQUA memes!</p>
                            </div>
                            <div class="choice-card info-card">
                                <div class="choice-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <h4>How It Works</h4>
                                <p>Follow these simple steps to create your meme:</p>
                                <div class="usage-steps">
                                    <div class="step-item">
                                        <span class="step-number">1</span>
                                        <span class="step-text">Write your meme idea</span>
                                    </div>
                                    <div class="step-item">
                                        <span class="step-number">2</span>
                                        <span class="step-text">Click Generate with AI</span>
                                    </div>
                                    <div class="step-item">
                                        <span class="step-number">3</span>
                                        <span class="step-text">Select & edit your image</span>
                                    </div>
                                    <div class="step-item">
                                        <span class="step-number">4</span>
                                        <span class="step-text">Share to Social Media and Publish to Gallery</span>
                                    </div>
                                </div>
                                
                                <div class="credit-info">
                                    <div class="credit-card">
                                        <div class="credit-header">
                                            <i class="fab fa-x-twitter"></i>
                                            <h4>X (Twitter) Login Benefits:</h4>
                                        </div>
                                        <div class="credit-benefits">
                                            <div class="benefit-row">
                                                <i class="fas fa-gift"></i>
                                                <span class="benefit-text"><strong>50 Credits</strong> welcome bonus</span>
                                            </div>
                                            <div class="benefit-row">
                                                <i class="fas fa-calendar-day"></i>
                                                <span class="benefit-text"><strong>30 Credits</strong> daily (claim once per 24h)</span>
                                            </div>
                                            <div class="benefit-row">
                                                <i class="fas fa-bolt"></i>
                                                <span class="benefit-text"><strong>5 Credits</strong> per generation</span>
                                            </div>
                                            <div class="benefit-row">
                                                <i class="fas fa-share-alt"></i>
                                                <span class="benefit-text">Publish to gallery & share directly</span>
                                            </div>
                                            <div class="benefit-row terms-link-row">
                                                <i class="fas fa-file-contract"></i>
                                                <span class="benefit-text">
                                                    <a href="#" onclick="openTosModal()" class="terms-link">View Terms of Service</a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Generation Form -->
                        <div class="ai-form" id="aiForm">
                            <div class="model-info">
                                <!-- AQUA trained model info will be loaded here -->
                            </div>
                            <label class="form-label">Describe your $AQUA meme image:</label>
                            <div class="ai-instructions">
                                <p><i class="fas fa-lightbulb"></i> <strong>Pro tip:</strong> To include text on your image, use quotation marks like "$AQUA" or "To the Moon!"</p>
                            </div>
                            <textarea class="prompt-input" id="aiPrompt" placeholder="Example: A wet cat sitting in the rain with a sad expression, holding a SUI blockchain logo, digital art style, meme format"></textarea>
                            <button class="btn-small btn-full" id="generateBtn">
                                <i class="fas fa-magic"></i> Generate with AI
                            </button>
                            <div id="generationStatus" style="display: none; text-align: center; margin-top: 15px;">
                                <i class="fas fa-spinner fa-spin"></i> Generating your image...
                            </div>
                        </div>

                        <!-- Upload removed - AI generation only -->
                    </div>
                </div>

                <!-- Step 2: Your Images -->
                <div class="step-container scroll-animate" id="step2">
                    <div class="step-header" onclick="toggleStep('step2')">
                        <div class="step-title" style="display: flex; align-items: center; width: 100%;">
                            <span class="step-number">2</span>
                            <h3><i class="fas fa-images"></i> Your Images</h3>
                            <div class="storage-info" style="margin-left: auto; font-size: 0.8rem; color: #888;">
                                <span id="storageUsage">Storage: 0 KB</span>
                                <button class="btn-small btn-secondary-small" id="clearStorageBtn" style="margin-left: 10px; padding: 4px 8px; font-size: 0.7rem;">
                                    <i class="fas fa-trash"></i> Clear All
                                </button>
                            </div>
                        </div>
                        <i class="fas fa-chevron-up step-toggle"></i>
                    </div>
                    <div class="step-content">
                        <p>Choose from your generated images:</p>
                        <div class="recent-grid" id="userImagesGrid">
                            <div class="empty-gallery">
                                <i class="fas fa-images" style="font-size: 3rem; color: rgba(77, 162, 255, 0.3);"></i>
                                <p style="color: rgba(255,255,255,0.6); margin-top: 10px;">No images yet. Generate some images first!</p>
                            </div>
                        </div>
                        <div class="step-navigation" style="margin-top: 20px; text-align: center;">
                            <button class="btn-small btn-secondary-small" onclick="memeGenerator.expandStep('step1')">
                                <i class="fas fa-arrow-left"></i> Back to Generate
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Edit Your Meme -->
                <div class="step-container scroll-animate" id="step3">
                    <div class="step-header" onclick="toggleStep('step3')">
                        <div class="step-title">
                            <span class="step-number">3</span>
                            <h3>Edit Your Meme</h3>
                        </div>
                        <i class="fas fa-chevron-up step-toggle"></i>
                    </div>
                    <div class="step-content">
                        <div class="editing-layout">
                            <!-- Editing Sidebar (Left Side) -->
                            <div class="editing-sidebar">
                                <!-- Add Elements -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-plus"></i> Add</h5>
                                    <div class="compact-buttons">
                                        <button class="compact-btn" id="addTextBtn" title="Add Text">
                                            <i class="fas fa-font"></i>
                                        </button>
                                        <button class="compact-btn" id="addShapeBtn" title="Add Shape">
                                            <i class="fas fa-shapes"></i>
                                        </button>
                                    </div>
                                    
                                    <!-- Shape Selection -->
                                    <div class="shape-tools" id="shapeTools" style="display: none;">
                                        <button class="shape-btn" data-shape="rectangle" title="Rectangle">
                                            <i class="fas fa-square"></i>
                                        </button>
                                        <button class="shape-btn" data-shape="circle" title="Circle">
                                            <i class="fas fa-circle"></i>
                                        </button>
                                        <button class="shape-btn" data-shape="triangle" title="Triangle">
                                            <i class="fas fa-play"></i>
                                        </button>
                                        <button class="shape-btn" data-shape="star" title="Star">
                                            <i class="fas fa-star"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Text Styling -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-font"></i> Text</h5>
                                    
                                    <!-- Text Content -->
                                    <input type="text" id="textInput" class="compact-input" placeholder="Enter text...">
                                    
                                    <!-- Font & Size Row -->
                                    <div class="compact-row">
                                        <select id="fontFamily" class="compact-select">
                                            <option value="Impact">Impact</option>
                                            <option value="Anton">Anton</option>
                                            <option value="Bebas Neue">Bebas Neue</option>
                                            <option value="Oswald">Oswald</option>
                                            <option value="Fredoka One">Fredoka One</option>
                                            <option value="Bangers">Bangers</option>
                                            <option value="Righteous">Righteous</option>
                                            <option value="Arial Black">Arial Black</option>
                                        </select>
                                        <div class="compact-range">
                                            <input type="range" id="fontSize" min="16" max="120" value="40">
                                            <span id="fontSizeValue">40px</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Colors Row -->
                                    <div class="compact-row">
                                        <div class="color-group">
                                            <label>Text</label>
                                            <input type="color" id="textColor" value="#ffffff">
                                        </div>
                                        <div class="color-group">
                                            <label>Stroke</label>
                                            <input type="color" id="strokeColor" value="#000000">
                                        </div>
                                        <div class="compact-range">
                                            <input type="range" id="strokeWidth" min="0" max="10" value="2">
                                            <span id="strokeWidthValue">2px</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Text Alignment -->
                                    <div class="compact-row">
                                        <div class="align-buttons">
                                            <button type="button" id="alignLeft" class="align-btn" title="Left">
                                                <i class="fas fa-align-left"></i>
                                            </button>
                                            <button type="button" id="alignCenter" class="align-btn active" title="Center">
                                                <i class="fas fa-align-center"></i>
                                            </button>
                                            <button type="button" id="alignRight" class="align-btn" title="Right">
                                                <i class="fas fa-align-right"></i>
                                            </button>
                                        </div>
                                        
                                        <!-- Shadow Toggle -->
                                        <div class="shadow-toggle">
                                            <input type="checkbox" id="enableShadow">
                                            <label for="enableShadow">Shadow</label>
                                            <input type="color" id="shadowColor" value="#000000" style="width: 30px;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Element Properties -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-cog"></i> Properties</h5>
                                    
                                    <!-- Opacity -->
                                    <div class="compact-row">
                                        <label>Opacity</label>
                                        <div class="compact-range">
                                            <input type="range" id="opacity" min="0" max="100" value="100">
                                            <span id="opacityValue">100%</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Colors -->
                                    <div class="compact-row">
                                        <div class="color-group">
                                            <label>Fill</label>
                                            <input type="color" id="fillColor" value="#4DA2FF">
                                        </div>
                                        <div class="color-group">
                                            <label>Border</label>
                                            <input type="color" id="borderColor" value="#ffffff">
                                        </div>
                                        <div class="compact-range">
                                            <input type="range" id="borderWidth" min="0" max="20" value="0">
                                            <span id="borderWidthValue">0px</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Layers & Actions -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-layer-group"></i> Layers</h5>
                                    
                                    <!-- Layer Controls -->
                                    <div class="compact-buttons">
                                        <button id="moveToFront" class="compact-btn" title="Front">
                                            <i class="fas fa-arrow-up"></i>
                                        </button>
                                        <button id="moveToBack" class="compact-btn" title="Back">
                                            <i class="fas fa-arrow-down"></i>
                                        </button>
                                        <button id="lockObject" class="compact-btn" title="Lock">
                                            <i class="fas fa-lock"></i>
                                        </button>
                                        <button id="duplicateObject" class="compact-btn" title="Duplicate">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    
                                    <!-- Layer List -->
                                    <div class="layer-list" id="layerList">
                                        <!-- Layers will be populated dynamically -->
                                    </div>
                                </div>

                                <!-- Edit Actions -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-edit"></i> Edit</h5>
                                    
                                    <div class="compact-buttons">
                                        <button id="bringForwardBtn" class="compact-btn" title="Forward">
                                            <i class="fas fa-level-up-alt"></i>
                                        </button>
                                        <button id="sendBackwardBtn" class="compact-btn" title="Backward">
                                            <i class="fas fa-level-down-alt"></i>
                                        </button>
                                        <button id="copyBtn" class="compact-btn" disabled title="Copy (Ctrl+C)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                        <button id="pasteBtn" class="compact-btn" disabled title="Paste (Ctrl+V)">
                                            <i class="fas fa-paste"></i>
                                        </button>
                                    </div>
                                    
                                    <button id="deleteBtn" class="delete-btn" title="Delete (Del)">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </div>

                                <!-- Save & Share -->
                                <div class="control-group compact">
                                    <h5><i class="fas fa-share"></i> Export</h5>
                                    
                                    <button id="shareToSocialBtn" class="action-btn primary">
                                        <i class="fas fa-share-alt"></i> Share
                                    </button>
                                    <button id="exportBtn" class="action-btn secondary">
                                        <i class="fas fa-download"></i> Download
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Canvas Section (Right Side) -->
                            <div class="canvas-section">
                                <div class="canvas-toolbar">
                                    <!-- Basic Actions -->
                                    <div class="toolbar-group">
                                        <button class="compact-btn" id="undoBtn" title="Undo (Ctrl+Z)">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                        <button class="compact-btn" id="redoBtn" title="Redo (Ctrl+Y)">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                        <button class="compact-btn" id="clearBtn" title="Clear Canvas">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                        <button class="compact-btn" id="changeImageBtn" title="Change Image">
                                            <i class="fas fa-image"></i>
                                        </button>
                                    </div>
                                    
                                    <!-- Export Actions -->
                                    <div class="toolbar-group">
                                        <button class="compact-btn secondary" id="saveDraftBtn" title="Save Draft">
                                            <i class="fas fa-save"></i>
                                        </button>
                                        <button class="compact-btn success" id="publishBtn" title="Publish">
                                            <i class="fas fa-share"></i>
                                        </button>
                                        <button class="compact-btn primary" id="exportBtn" title="Download">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="canvas-container">
                                    <canvas id="memeCanvas" width="600" height="600"></canvas>
                                </div>
                                
                                <!-- Meme Title Input -->
                                <div class="meme-title-container">
                                    <label for="memeTitle">Meme Title:</label>
                                    <input type="text" id="memeTitle" placeholder="Enter a title for your meme..." maxlength="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

        <!-- Image Selection Modal -->
    <div class="modal-overlay" id="imageSelectionModal">
        <div class="modal-content">
            <button class="modal-close" data-action="close-modal">&times;</button>
            <div class="modal-header">
                <h2><i class="fas fa-image"></i> Use This Image?</h2>
            </div>

            <div class="image-selection-preview">
                <img id="selectedImagePreview" src="" alt="Selected image">
                <p style="color: var(--text-light); margin: 15px 0; text-align: center;">
                    Do you want to use this image for your meme?
                </p>
            </div>

            <div class="modal-actions" style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                <button class="btn-small btn-secondary-small" id="goBackToImages">
                    <i class="fas fa-arrow-left"></i> Back to Images
                </button>
                <button class="btn-small btn-primary" id="useSelectedImage">
                    <i class="fas fa-check"></i> Use Image
                </button>
            </div>
        </div>
    </div>

    <!-- Social Sharing Modal -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal-content">
            <button class="modal-close" data-action="close-modal">&times;</button>
            <div class="modal-header">
                <h2><i class="fas fa-share-alt"></i> Share Your Meme</h2>
            </div>

            <div class="share-preview">
                <img id="sharePreviewImage" src="" alt="Meme preview">
                <h4 style="color: var(--text-light); margin: 10px 0;">Add a message (optional):</h4>
                <textarea class="share-message" id="shareMessage" placeholder="Check out this awesome meme I made! ðŸ”¥ #AQUA #MemeGenerator"></textarea>
            </div>

            <div class="social-platforms">
                <a href="#" class="social-platform universal" data-platform="universal" style="background: linear-gradient(45deg, #4CAF50, #45a049);">
                    <i class="fas fa-share"></i> Share
                </a>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://x.com/AQUA_on_SUI" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="https://t.me/AQUA_CAT_ON_SUI" target="_blank" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                <a href="https://dexscreener.com/" target="_blank" aria-label="Dexscreener"><i class="fas fa-chart-line"></i></a>
                <a href="https://www.reddit.com/r/AQUA_on_SUI/" target="_blank" aria-label="Reddit"><i class="fab fa-reddit"></i></a>
            </div>
            <p class="disclaimer">
                <strong>Disclaimer:</strong> $AQUA is a meme coin with no intrinsic value or expectation of financial return. It is for entertainment purposes only. Always do your own research.
            </p>
        </div>
    </footer>

    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Terms of Service Modal -->
    <div id="tosModal" class="modal" style="display: none;">
        <div class="modal-content terms-modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-contract"></i> Terms of Service</h2>
                <span class="close" onclick="closeTosModal()">&times;</span>
            </div>
            <div class="modal-body terms-content">
                
                <div class="terms-section">
                    <h3><i class="fas fa-info-circle"></i> Service Overview</h3>
                    <p>Welcome to the $AQUA Meme Generator! This service allows you to create, edit, and share memes using AI-powered image generation and advanced editing tools.</p>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-user-shield"></i> User Accounts & Authentication</h3>
                    <ul>
                        <li><strong>Anonymous Users:</strong> Limited to 3 AI generations per 24-hour period (Pacific Time)</li>
                        <li><strong>X (Twitter) Authentication:</strong> Optional login provides enhanced features and credit system</li>
                        <li><strong>Account Benefits:</strong> 50 welcome credits, 30 daily credits, unlimited generations (5 credits each)</li>
                        <li><strong>No Personal Data Sales:</strong> We never sell your personal information</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-coins"></i> Credit System</h3>
                    <ul>
                        <li><strong>Anonymous Limits:</strong> 3 free generations per rolling 24-hour period</li>
                        <li><strong>First X Login Bonus:</strong> 50 credits upon first authentication</li>
                        <li><strong>Daily Bonus:</strong> 30 credits available once per 24-hour period</li>
                        <li><strong>Generation Cost:</strong> 5 credits per AI image generation</li>
                        <li><strong>Remix Cost:</strong> 5 credits per image remix</li>
                        <li><strong>Timezone:</strong> All rate limits and bonuses reset at midnight Pacific Time (America/Los_Angeles)</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-database"></i> Image Storage & Privacy</h3>
                    <ul>
                        <li><strong>Local Storage:</strong> Your generated images are stored locally in your browser only</li>
                        <li><strong>No Server Storage:</strong> Images in "Your Images" section are NOT stored on our servers</li>
                        <li><strong>Device-Specific:</strong> Images are tied to your browser/device, not your account</li>
                        <li><strong>Automatic Cleanup:</strong> Browser storage is automatically cleaned when approaching limits (keeps 5 most recent)</li>
                        <li><strong>Manual Control:</strong> You can delete individual images or clear all stored images at any time</li>
                        <li><strong>Privacy-First:</strong> Your personal image collection never leaves your device unless you choose to publish to gallery</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-share-alt"></i> Content Ownership & Usage</h3>
                    <ul>
                        <li><strong>Community Benefit:</strong> All memes created and published to the gallery are assigned to the $AQUA community for promotional use</li>
                        <li><strong>Free Usage Rights:</strong> $AQUA may use published content for community marketing, social media, and promotional purposes</li>
                        <li><strong>Creator Attribution:</strong> When possible, original creators will be credited</li>
                        <li><strong>No Commercial Licensing:</strong> Published content is for $AQUA community use only</li>
                        <li><strong>Personal Use:</strong> You retain rights to use your creations for personal, non-commercial purposes</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-trophy"></i> Weekly Competitions</h3>
                    <ul>
                        <li><strong>Competition Period:</strong> Monday to Sunday, Pacific Time</li>
                        <li><strong>Prize:</strong> $10 USD equivalent in SUI tokens for weekly winner</li>
                        <li><strong>Voting System:</strong> Winner determined by most likes received</li>
                        <li><strong>Eligibility:</strong> All published memes automatically entered in current week's competition</li>
                        <li><strong>Admin Discretion:</strong> Final winner selection subject to admin review for quality and appropriateness</li>
                        <li><strong>Prize Distribution:</strong> Winners contacted via X (Twitter) for prize distribution</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-recycle"></i> Remix System</h3>
                    <ul>
                        <li><strong>Remix Eligibility:</strong> Only original/AI-generated images can be remixed (not final edited versions)</li>
                        <li><strong>Clean Loading:</strong> Remixed images load without text overlays or edits</li>
                        <li><strong>Credit Cost:</strong> 5 credits charged per remix</li>
                        <li><strong>New Creation:</strong> Remixes create new memes, not versions of originals</li>
                        <li><strong>Attribution:</strong> Original creators credited when possible</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-shield-alt"></i> Technical & Security</h3>
                    <ul>
                        <li><strong>Rate Limiting:</strong> Enforced by IP address for anonymous users</li>
                        <li><strong>Data Security:</strong> All communications encrypted via HTTPS</li>
                        <li><strong>Browser Storage:</strong> Local storage quotas managed automatically (4MB limit)</li>
                        <li><strong>Service Availability:</strong> Best effort uptime, no guarantees for continuous availability</li>
                        <li><strong>Technical Support:</strong> Community-based support via social media channels</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-gavel"></i> Acceptable Use</h3>
                    <ul>
                        <li><strong>Content Guidelines:</strong> No illegal, harmful, or offensive content</li>
                        <li><strong>Copyright Respect:</strong> Do not use copyrighted material without permission</li>
                        <li><strong>Community Standards:</strong> Maintain respectful, family-friendly content when possible</li>
                        <li><strong>No Abuse:</strong> Do not attempt to circumvent rate limits or exploit the system</li>
                        <li><strong>Reporting:</strong> Report inappropriate content via social media channels</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-exclamation-triangle"></i> Disclaimers</h3>
                    <ul>
                        <li><strong>Service Availability:</strong> Service provided "as is" without warranties</li>
                        <li><strong>Content Responsibility:</strong> Users responsible for their own content</li>
                        <li><strong>Technical Limitations:</strong> Browser storage and performance may vary</li>
                        <li><strong>Credit System:</strong> Credits have no monetary value and cannot be transferred</li>
                        <li><strong>Competition Changes:</strong> Competition rules and prizes subject to change</li>
                    </ul>
                </div>

                <div class="terms-section">
                    <h3><i class="fas fa-clock"></i> Effective Date & Changes</h3>
                    <p>These terms are effective as of the date of access. We reserve the right to modify these terms at any time. Continued use of the service constitutes acceptance of any changes.</p>
                    <p><strong>Last Updated:</strong> <span id="tosDate"></span></p>
                </div>

                <div class="terms-section contact-section">
                    <h3><i class="fas fa-envelope"></i> Contact</h3>
                    <p>Questions about these terms? Contact us via our social media channels or through the $AQUA community.</p>
                </div>

            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeTosModal()">
                    <i class="fas fa-check"></i> I Understand
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/script.js?v=<%= Date.now() %>"></script>
    <script src="/js/auth.js?v=<%= Date.now() %>"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="/js/meme-generator.js?v=<%= Date.now() %>"></script>
    
    <% if (typeof autoOpenTerms !== 'undefined' && autoOpenTerms) { %>
    <script>
        // Auto-open Terms of Service modal when accessed via direct URL
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                openTosModal();
            }, 500);
        });
    </script>
    <% } %>
</body>
</html> 